# eqnlines package
# Matthew Bertucci 2025/02/26 for v0.5

#include:keyval

\begin{align}#\math,array
\end{align}
\begin{align*}#\math,array
\end{align*}
\begin{aligned}#m
\end{aligned}#m
\begin{equation*}#\math
\end{equation*}
\begin{equations}#\math,array
\begin{equations}[options%keyvals]#\math,array
\end{equations}
\begin{equationsbox}#\math,array
\begin{equationsbox}[options%keyvals]#\math,array
\end{equationsbox}
\begin{flalign}#\math,array
\end{flalign}
\begin{flalign*}#\math,array
\end{flalign*}
\begin{gather}#\math
\end{gather}
\begin{gather*}#\math
\end{gather*}
\begin{gathered}#m
\end{gathered}#m
\begin{intertext}
\begin{intertext}[options%keyvals]
\end{intertext}
\begin{multline}#\math
\end{multline}
\begin{multline*}#\math
\end{multline*}
\begin{multlined}#m
\end{multlined}#m
\begin{subequations}
\begin{subequations}[options%keyvals]
\end{subequations}
\<
\>

\displaybreak
\displaybreak[value]
\donumber
\eqnaddopt{options%keyvals}
\eqnlinesprovide{features%keyvals}
\eqnlinesset{options%keyvals}
\eqnpunct{punct}
\eqnpunctcol{punct}
\eqnpunctline{punct}
\eqnpunctmain{punct}
\eqref{label}#r
\intertext[options%keyvals]{text}
\intertext{text}
\numberhere
\numbernext
\raisetag{dimen}
\shovecenter{arg}
\shoveleft!{arg}
\shoveleft*{arg}
\shoveleft[dimen]{arg}
\shoveleft{arg}
\shoveright{arg}
\tag*{label%text}#m
\tag{label%text}#m
\theHparentequation#*
\theparentequation#*

#keyvals:\usepackage/eqnlines#c,\eqnlinesset,\begin{equation},\eqnaddopt,\begin{equationsbox}
spread=##L
strut#true,false
struttag#true,false
punctsep=%<sep%>
punct=%<punct%>
punctline=%<punct%>
punctcol=%<punct%>
punct*=%<punct%>
punctline*=%<punct%>
punctcol*=%<punct%>
shape=%<mode%>
padding=##L
pad=##L
padleft=##L
padright=##L
padmax#true,false
indent=##L
indent*=##L
classout=%<class%>
classin=%<class%>
classin*=%<class%>
ampeq
eqamp
class=#ampeq,eqamp
#endkeyvals

#keyvals:\usepackage/eqnlines#c,\eqnlinesset,\begin{equation},\eqnaddopt
allowbreaks=#0,1,2,3,4
allowdisplaybreaks=#0,1,2,3,4
displayheight=##L
displaydepth=##L
tagmargin=##L
tagmargin*=##L
mintagsep=##L
mintagwidth=##L
mintagwidth*=##L
numberline
numberline=%<mode%>
nonumber
donumber
number
tagsleft
leqno
tagsright
reqno
tags
eqno
layout=#left,center
center
left
leftmargin=##L
minleftmargin=##L
maxleftmargin=##L
marginbadness=%<integer%>
maxbadness=%<integer%>
mincolsep=##L
maxcolsep=##L
maxcolsep*
margins#true,false
#endkeyvals

#keyvals:\usepackage/eqnlines#c,\eqnlinesset,\begin{equationsbox}
margin=##L
marginleft=##L
marginright=##L
#endkeyvals

#keyvals:\usepackage/eqnlines#c,\eqnlinesset
native#true,false
sqropt={%<options%>}
angopt={%<options%>}
displaybreak=#0,1,2,3,4
noskip
noskip=#above,below,both
skip=##L
aboveskip=##L
belowskip=##L
aboveshortskip=##L
belowshortskip=##L
tagskip=##L
abovetagskip=##L
belowtagskip=##L
medskip=##L
abovemedskip=##L
abovetopskip=##L
aboveparskip=##L
abovecontskip=##L
belowmedskip=##L
shortmode=#off,above,belowone,belowall
taglayout=%<code%>
taglayout*=%<code%>
tagform=%<code%>
tagform*=%<code%>
subeqtemplate=%<code%>
autolabel#true,false
autotag#true,false
linesfallback#true,false
ampproof#true,false
crerror#true,false
#endkeyvals

#keyvals:\usepackage/eqnlines#c
equation#true,false
amsmath#true,false
amsmathends#true,false
ang#true,false
#endkeyvals

#keyvals:\begin{equations},\begin{subequations}
label=##l
tag=%<text%>
tag*=%<text%>
#endkeyvals

#keyvals:\begin{equations},\eqnaddopt
equation
eq
single
1
gather
ga
lines
ln
~
align
al
columns
col
@
native#true,false
displaybreak=#0,1,2,3,4
noskip
noskip=#above,below,both
short
short=#above,below,both
long
long=#above,below,both
medskip
medskip=#above,below,both
skip=##L
aboveskip=##L
belowskip=##L
abovespace=##L
belowspace=##L
#endkeyvals

#keyvals:\begin{intertext},\intertext
skip=##L
aboveskip=##L
belowskip=##L
noskip
noskip=#above,below,both
short
short=#above,below,both
long
long=#above,below,both
medskip
medskip=#above,below,both
#endkeyvals

#keyvals:\eqnlinesprovide
equation
gather
multline
align
flalign
aligned
gathered
multlined
subequations
sqr
ang
eqref
notag
thetag
allowdisplaybreaks
#endkeyvals

# not defined by default (need to use \eqnlinesprovide)
\allowdisplaybreaks#S
\allowdisplaybreaks[value]#S
\notag#Sm
\numberwithin[format]{counter}{within-counter}#S
\numberwithin{counter}{within-counter}#S
\thetag#S